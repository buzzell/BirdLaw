$(function(){$(window).on("swipeleft",randomQ).on("swiperight",function(){window.history.back()}).on("resize",center).on("popstate",function(o){quoteChange(o.originalEvent.state)}).on("keyup",function(o){32==o.keyCode?(o.preventDefault(),playClip()):39==o.keyCode?randomQ():37==o.keyCode&&window.history.back()}),$(".random").on("click",randomQ),$(".pp").on("click",playClip),sunnyday()});var currQ,isPlaying;quoteChange=function(o){o.by||(o.by="Charlie Kelly"),$(".snap").fadeOut("fast",function(){$(this).css("background-image","url("+o.slug+".jpg)").fadeIn("fast")});var e='<blockquote class="quo"><p>'+o.quote+"</p><div>&mdash; "+o.by+", "+o.season+"</div></blockquote>";$(".clip").html('<source src="/'+o.slug+'.ogg" type="audio/ogg"><source src="/'+o.slug+'.mp3" type="audio/mpeg">'),$(".quoteBox").fadeOut("fast",function(){$(this).html(e).fadeIn("fast"),center()}),$("title").html(o.title),$(".clip")[0].load(),$(".clip")[0].play()},randomQ=function(){var o=currQ;do currQ=randomGen(1,quotes.length)-1;while(currQ==o);quoteChange(quotes[currQ]),history.pushState(quotes[currQ],"",quotes[currQ].slug)},randomGen=function(o,e){return Math.floor(Math.random()*(e-o+1))+o},playState=function(o){1==o?(isPlaying=!0,$(".pp").removeClass("play").addClass("pause"),$(".ring").fadeIn("fast")):2==o?(isPlaying=!1,$(".pp").removeClass("pause").addClass("play"),$(".ring").fadeOut("fast")):3==o&&($(".clip")[0].load(),$(".ring").fadeOut("fast"))},playClip=function(){isPlaying?$(".clip")[0].pause():$(".clip")[0].play()},center=function(){var o=$(".quoteBox").height(),e=$(window).height();o>e?$(".quoteBox").removeClass("center"):$(".quoteBox").addClass("center")},sunnyday=function(){if("/"!=window.location.pathname&&"/index.php"!=window.location.pathname){var o=window.location.pathname.slice(1),e=$.grep(quotes,function(e){return e.slug==o});e.length?(quoteChange(e[0]),history.replaceState(e[0],"",o)):($(".clip").html('<source src="/so-stupid.ogg" type="audio/ogg"><source src="/so-stupid.mp3" type="audio/mpeg">'),$(".quoteBox").html("<blockquote><p>"+o+" not found...</p></blockquote>"),$("title").html(o+" not found"),$(".clip")[0].load(),$(".clip")[0].play())}else randomQ()};